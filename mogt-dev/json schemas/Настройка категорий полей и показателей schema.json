{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "title": "Настройка категорий полей и показателей",
    "description": "Настройка категорий полей и показателей",
    "additionalProperties": false,
    "minProperties": 1,
    "properties": {
      "elements": {
        "type": "array",
        "minItems": 1,
        "items": {
          "type": "object",
          "additionalProperties": false,
          "minProperties": 1,
          "properties": {
            "type_card": {
              "enum": [
                "tech",
                "card"
              ],
              "description": "tech - переход в карточку техпроцесса card - переход в карточку"
            },
            "itid_external": {
              "oneOf": [
                {
                  "type": "integer",
                  "minimum": 0
                },
                {
                  "type": "array",
                  "minItems": 1,
                  "items": {
                    "type": "integer",
                    "minimum": 0
                  }
                }
              ],
              "description": "реестры ИСОГД, в которых искать карточки",
              "examples": [
                2,
                786,
                [
                  2,
                  789
                ]
              ]
            },
            "name_href": {
              "description": "имя кнопки",
              "type": "string"
            },
            "options": {
              "type": "object",
              "additionalProperties": false,
              "minProperties": 1,
              "properties": {
                "confirmation": {
                  "enum": [
                    1,
                    0
                  ],
                  "description": "появится окно подтверждения выбора (работает только для полей со справочником"
                },
                "data_proc": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "tid_type_card": {
                      "type": "integer",
                      "description": "поле где выбирается тип, по которому я буду искать сколько выполняется данная задача"
                    },
                    "tid_reg_star": {
                      "type": "integer",
                      "description": "айди поля куда пользователь ввел начало выполнения задачи"
                    },
                    "tid_reg_end": {
                      "type": "integer",
                      "description": "айди поля куда мне сохранить регламентную"
                    },
                    "form_reload": {
                      "type": "string",
                      "description": ""
                    },
                    "req_type": {
                      "type": "string"
                    },
                    "tid_cadnum": {
                      "type": "integer"
                    },
                    "act": {
                      "type": "string"
                    },
                    "did": {
                      "enum": [
                        "#did#"
                      ]
                    },
                    "tid_inn": {
                      "type": "integer"
                    },
                    "type": {
                      "type": "string"
                    },
                    "type_func": {
                      "type": "string",
                      "description": "параметр функции",
                      "examples": [
                        "new_card"
                      ]
                    },
                    "user_text": {
                      "type": "string"
                    },
                    "subject": {
                      "type": "string"
                    },
                    "tid": {
                      "type": "integer"
                    },
                    "cat_end": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "cat_start": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "tid_reg_start": {
                      "type": "integer"
                    },
                    "tid_send_notif": {
                      "type": "integer"
                    },
                    "tep_num": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "type_notific": {
                      "type": "string"
                    },
                    "valid_params": {
                      "type": "object",
                      "additionalProperties": false,
                      "minProperties": 1,
                      "properties": {
                        "tep_id": {
                          "type": "array",
                          "minItems": 1,
                          "items": {
                            "type": "integer",
                            "minimum": 0
                          }
                        }
                      }
                    },
                    "cat_to": {
                      "type": "string"
                    },
                    "alert": {
                      "enum": [
                        1,
                        0
                      ]
                    }
                  }
                },
                "text_on_button": {
                  "type": "string"
                },
                "procname_button": {
                  "type": "string"
                },
                "icon": {
                  "type": "string"
                }
              }
            },
            "itid": {
              "type": "integer",
              "minimum": 0
            },
            "type_form": {
              "type": "string"
            },
            "func_access": {
              "type": "integer",
              "minimum": 0
            },
            "show_param": {
              "tid_show": {
                "type": "integer"
              },
              "value_show": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "string"
                    }
                  }
                ]
              }
            },
            "role_access": {
              "type": "integer",
              "minimum": 0
            }
          }
        }
      },
      "hide_show": {
        "type": "array",
        "minItems": 1,
        "items": {
          "type": "object",
          "additionalProperties": false,
          "minProperties": 1,
          "properties": {
            "tid": {
              "type": "integer"
            },
            "itid": {
              "type": "integer",
              "minimum": 0
            }
          }
        }
      },
      "hide_show_2": {
        "type": "array",
        "minItems": 1,
        "items": {
          "type": "object",
          "additionalProperties": false,
          "minProperties": 1,
          "properties": {
            "tid": {
              "type": "integer"
            },
            "itid": {
              "type": "integer",
              "minimum": 0
            }
          }
        }
      },
      "not_show_empty": {
        "type": "object",
        "additionalProperties": false,
        "minProperties": 1,
        "properties": {
          "itid": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "integer",
              "minimum": 0
            },
            "description": "массив реестра, где учитывать данную настройку."
          },
          "multi": {
            "type": "integer",
            "minimum": 0
          }
        },
        "description": "Настройка чтобы не показывать незаполненное поле"
      },
      "calc_date_data": {
        "type": "object",
        "minProperties": 1,
        "additionalProperties": false,
        "properties": {
          "cnt_day": {
            "description": "количество дней регламентных",
            "type": "integer",
            "minimum": 0,
            "examples": [
              34,
              36
            ]
          },
          "type_day": {
            "description": "типы дней рабочие или календарные",
            "enum": [
              "work",
              "calendar"
            ]
          }
        }
      },
      "alarm_data": {
        "type": "object",
        "minProperties": 1,
        "additionalProperties": false,
        "properties": {
          "cnt_day": {
            "description": "количество дней регламентных",
            "type": "integer",
            "minimum": 0,
            "examples": [
              34,
              36
            ]
          },
          "type_day": {
            "description": "типы дней рабочие или календарные",
            "enum": [
              "work",
              "calendar"
            ]
          },
          "notific_data": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "minProperties": 1,
              "properties": {
                "tid_user_notif": {
                  "type": "integer",
                  "description": "айди поля куда в справочнике выбран исполнитель по карточке"
                },
                "itid_notific": {
                  "type": "integer",
                  "description": "карточка связанного реестра"
                },
                "role_link": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "тип связи между реестрами, можно не добавлять, если роль связи"
                }
              },
              "description": "в случае если нужно затем уведомлять кого-то о том, что подходит срок исполнения задачи"
            }
          }
        }
      },
      "row_number": {
        "type": "string"
      },
      "type": {
        "type": "string"
      },
      "legend_key": {
        "type": "integer",
        "minimum": 0
      },
      "legend_color": {
        "type": "string"
      },
      "text_type": {
        "type": "string"
      },
      "value_type": {
        "type": "string"
      },
      "number_mask": {
        "type": "object",
        "additionalProperties": false,
        "minProperties": 1,
        "properties": {
          "year": {
            "type": "string"
          },
          "number": {
            "type": "string"
          },
          "suffix": {
            "type": "string"
          }
        }
      },
      "name_col_1": {
        "enum": [
          "dec_graph",
          "jan_graph",
          "feb_graph",
          "mar_graph",
          "apr_graph",
          "may_graph",
          "jun_graph",
          "jul_graph",
          "aug_graph",
          "sep_graph",
          "oct_graph",
          "nov_graph"
        ]
      },
      "place_show": {
        "enum": [
          "col_1",
          "col_2",
          "footer_col_1",
          "footer_col_2"
        ]
      },
      "itids": {
        "oneOf": [
          {
            "type": "integer",
            "minimum": 0
          },
          {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "integer",
              "minimum": 0
            }
          }
        ]
      },
      "multi": {
        "type": "integer",
        "minimum": 0
      },
      "link_role": {
        "type": "integer",
        "minimum": 0
      },
      "sql_paracing": {
        "type": "string"
      },
      "am": {
        "type": "string",
        "oneOf": [
          {
            "pattern": "^[1-9]{1}$"
          },
          {
            "enum": [
              "10",
              "11",
              "12",
              "total"
            ]
          }
        ]
      },
      "uv": {
        "type": "string",
        "oneOf": [
          {
            "pattern": "^[1-9]{1}$"
          },
          {
            "enum": [
              "10",
              "11",
              "12",
              "total"
            ]
          }
        ]
      },
      "total": {
        "type": "string"
      },
      "confirmation": {
        "enum": [
          1,
          0
        ]
      },
      "type_card": {
        "type": "string"
      },
      "itid_external": {
        "oneOf": [
          {
            "type": "integer",
            "minimum": 0
          },
          {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "integer",
              "minimum": 0
            }
          }
        ]
      },
      "name_href": {
        "type": "string"
      },
      "sql_parcing":{"type":"string"},
      "rldd_fields":{"enum": ["true", "false",true, false]}
    }
  }